<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gestione Configurazione API - ZeroCrash</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fzerocrash8354back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.6"></script>
</head>
<body class="bg-background min-h-screen">
    <!-- Header Navigation -->
    <header class="bg-surface border-b border-border sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <svg class="h-8 w-8 text-primary" viewBox="0 0 32 32" fill="currentColor">
                            <path d="M16 2L3 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-13-5z"/>
                            <path d="M14 14l-2-2-1.41 1.41L14 16.83l6-6L18.59 9.41 14 14z" fill="white"/>
                        </svg>
                    </div>
                    <div class="ml-3">
                        <h1 class="text-xl font-heading font-semibold text-text-primary">ZeroCrash</h1>
                        <p class="text-xs text-text-secondary">API Configuration & Management</p>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="hidden md:flex space-x-8">
                    <a href="dashboard_home.html" class="text-text-secondary hover:text-primary transition-smooth px-3 py-2 rounded-md text-sm font-medium">
                        <i class="fas fa-home mr-2"></i>Dashboard
                    </a>
                    <a href="advanced_search_results.html" class="text-text-secondary hover:text-primary transition-smooth px-3 py-2 rounded-md text-sm font-medium">
                        <i class="fas fa-search mr-2"></i>Ricerca
                    </a>
                    <a href="category_management.html" class="text-text-secondary hover:text-primary transition-smooth px-3 py-2 rounded-md text-sm font-medium">
                        <i class="fas fa-tags mr-2"></i>Categorie
                    </a>
                    <a href="seo_suggestion_generator.html" class="text-text-secondary hover:text-primary transition-smooth px-3 py-2 rounded-md text-sm font-medium">
                        <i class="fas fa-lightbulb mr-2"></i>SEO
                    </a>
                    <a href="settings_configuration.html" class="text-text-secondary hover:text-primary transition-smooth px-3 py-2 rounded-md text-sm font-medium">
                        <i class="fas fa-cog mr-2"></i>Impostazioni
                    </a>
                </nav>

                <!-- Mobile menu button -->
                <div class="md:hidden">
                    <button type="button" class="text-text-secondary hover:text-primary p-2" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Navigation -->
        <div id="mobile-menu" class="md:hidden hidden bg-surface border-t border-border">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="dashboard_home.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base font-medium">
                    <i class="fas fa-home mr-2"></i>Dashboard
                </a>
                <a href="advanced_search_results.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base font-medium">
                    <i class="fas fa-search mr-2"></i>Ricerca
                </a>
                <a href="category_management.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base font-medium">
                    <i class="fas fa-tags mr-2"></i>Categorie
                </a>
                <a href="seo_suggestion_generator.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base font-medium">
                    <i class="fas fa-lightbulb mr-2"></i>SEO
                </a>
                <a href="settings_configuration.html" class="text-text-secondary hover:text-primary block px-3 py-2 rounded-md text-base font-medium">
                    <i class="fas fa-cog mr-2"></i>Impostazioni
                </a>
            </div>
        </div>
    </header>

    <!-- Breadcrumb -->
    <div class="bg-secondary-50 border-b border-border">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3">
            <nav class="flex items-center space-x-2 text-sm">
                <a href="dashboard_home.html" class="text-text-secondary hover:text-primary transition-smooth">
                    <i class="fas fa-home"></i>
                </a>
                <i class="fas fa-chevron-right text-text-secondary text-xs"></i>
                <a href="settings_configuration.html" class="text-text-secondary hover:text-primary transition-smooth">
                    Impostazioni
                </a>
                <i class="fas fa-chevron-right text-text-secondary text-xs"></i>
                <span class="text-primary font-medium">Gestione Configurazione API</span>
            </nav>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Page Header -->
        <div class="mb-8">
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
                <div>
                    <h1 class="text-3xl font-heading font-semibold text-text-primary">Gestione Configurazione API</h1>
                    <p class="text-text-secondary mt-2">Controllo centralizzato per integrazioni di servizi esterni: Google News API, YouTube Data API e connessioni Reddit</p>
                </div>
                <div class="flex items-center space-x-3">
                    <span class="badge-success">3 Servizi Attivi</span>
                    <button id="test-all-connections" class="btn-primary flex items-center space-x-2">
                        <i class="fas fa-sync"></i>
                        <span>Test Completo</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Quick Status Overview -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <div class="card p-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-success-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-newspaper text-success text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <h3 class="font-semibold text-text-primary">Google News</h3>
                            <p class="text-sm text-text-secondary">API Attiva</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-2xl font-bold text-success">2,847</div>
                        <div class="text-xs text-text-secondary">/ 10,000 richieste</div>
                    </div>
                </div>
            </div>

            <div class="card p-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-error-100 rounded-lg flex items-center justify-center">
                            <i class="fab fa-youtube text-error text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <h3 class="font-semibold text-text-primary">YouTube Data</h3>
                            <p class="text-sm text-text-secondary">API Attiva</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-2xl font-bold text-success">1,523</div>
                        <div class="text-xs text-text-secondary">/ 10,000 richieste</div>
                    </div>
                </div>
            </div>

            <div class="card p-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-warning-100 rounded-lg flex items-center justify-center">
                            <i class="fab fa-reddit text-warning text-xl"></i>
                        </div>
                        <div class="ml-4">
                            <h3 class="font-semibold text-text-primary">Reddit API</h3>
                            <p class="text-sm text-text-secondary">Limitato</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-2xl font-bold text-warning">892</div>
                        <div class="text-xs text-text-secondary">/ 1,000 richieste</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Configuration Sections -->
        <div class="space-y-8">
            <!-- API Keys Management -->
            <section class="card">
                <div class="border-b border-border p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 class="text-xl font-heading font-semibold text-text-primary">Gestione Chiavi API</h2>
                            <p class="text-text-secondary mt-1">Configura credenziali e controlla stato connessioni</p>
                        </div>
                        <button class="btn-secondary" onclick="toggleSection('api-keys-details')">
                            <i class="fas fa-chevron-down transition-transform" id="api-keys-icon"></i>
                            <span class="ml-2">Dettagli</span>
                        </button>
                    </div>
                </div>

                <div id="api-keys-details" class="p-6">
                    <!-- Google News API Configuration -->
                    <div class="mb-8">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <img src="https://images.unsplash.com/photo-1573804633927-bfcbcd909acd?q=80&w=60&auto=format&fit=crop" alt="Google News" class="w-10 h-10 rounded-lg mr-4" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'%234285F4\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z\'/%3E%3C/svg%3E';" />
                                <div>
                                    <h3 class="font-heading font-semibold text-text-primary">Google News API</h3>
                                    <p class="text-sm text-text-secondary">Accesso alle notizie tecnologiche italiane in tempo reale</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="flex items-center">
                                    <span class="w-3 h-3 bg-success rounded-full mr-2"></span>
                                    <span class="text-sm text-success font-medium">Attivo</span>
                                </div>
                                <button class="btn-accent text-sm" onclick="testConnection('google-news')">
                                    <i class="fas fa-play mr-1"></i>Test
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">
                                    <i class="fas fa-key mr-2"></i>API Key
                                </label>
                                <div class="relative">
                                    <input type="password" id="google-news-key" value="AIzaSyC8UiJf..." class="input-field w-full pr-10" placeholder="Inserisci la tua Google News API key" />
                                    <button type="button" onclick="togglePasswordVisibility('google-news-key')" class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                        <i class="fas fa-eye text-text-secondary"></i>
                                    </button>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">
                                    <i class="fas fa-chart-line mr-2"></i>Utilizzo Giornaliero
                                </label>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-text-secondary">2,847 / 10,000 richieste</span>
                                        <span class="text-success font-medium">28.47%</span>
                                    </div>
                                    <div class="w-full bg-secondary-200 rounded-full h-2">
                                        <div class="bg-success h-2 rounded-full transition-all duration-300" style="width: 28.47%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Connection Health Metrics -->
                        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-secondary-50 rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-text-secondary">Tempo Risposta</span>
                                    <span class="text-sm font-semibold text-success">245ms</span>
                                </div>
                            </div>
                            <div class="bg-secondary-50 rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-text-secondary">Successo Rate</span>
                                    <span class="text-sm font-semibold text-success">99.8%</span>
                                </div>
                            </div>
                            <div class="bg-secondary-50 rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-text-secondary">Ultimo Test</span>
                                    <span class="text-sm font-semibold text-text-primary">2 min fa</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- YouTube API Configuration -->
                    <div class="mb-8">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <img src="https://images.unsplash.com/photo-1611162617474-5b21e879e113?q=80&w=60&auto=format&fit=crop" alt="YouTube" class="w-10 h-10 rounded-lg mr-4" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'%23FF0000\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z\'/%3E%3C/svg%3E';" />
                                <div>
                                    <h3 class="font-heading font-semibold text-text-primary">YouTube Data API</h3>
                                    <p class="text-sm text-text-secondary">Contenuti video tecnologici, tutorial e statistiche canali</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="flex items-center">
                                    <span class="w-3 h-3 bg-success rounded-full mr-2"></span>
                                    <span class="text-sm text-success font-medium">Attivo</span>
                                </div>
                                <button class="btn-accent text-sm" onclick="testConnection('youtube')">
                                    <i class="fas fa-play mr-1"></i>Test
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">
                                    <i class="fas fa-key mr-2"></i>API Key
                                </label>
                                <div class="relative">
                                    <input type="password" id="youtube-key" value="AIzaSyBvOkBo..." class="input-field w-full pr-10" placeholder="Inserisci la tua YouTube API key" />
                                    <button type="button" onclick="togglePasswordVisibility('youtube-key')" class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                        <i class="fas fa-eye text-text-secondary"></i>
                                    </button>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">
                                    <i class="fas fa-chart-line mr-2"></i>Utilizzo Giornaliero
                                </label>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-text-secondary">1,523 / 10,000 richieste</span>
                                        <span class="text-success font-medium">15.23%</span>
                                    </div>
                                    <div class="w-full bg-secondary-200 rounded-full h-2">
                                        <div class="bg-success h-2 rounded-full transition-all duration-300" style="width: 15.23%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-secondary-50 rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-text-secondary">Tempo Risposta</span>
                                    <span class="text-sm font-semibold text-success">182ms</span>
                                </div>
                            </div>
                            <div class="bg-secondary-50 rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-text-secondary">Successo Rate</span>
                                    <span class="text-sm font-semibold text-success">97.2%</span>
                                </div>
                            </div>
                            <div class="bg-secondary-50 rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-text-secondary">Ultimo Test</span>
                                    <span class="text-sm font-semibold text-text-primary">5 min fa</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Reddit API Configuration -->
                    <div class="mb-8">
                        <div class="flex items-center justify-between mb-4">
                            <div class="flex items-center">
                                <img src="https://images.unsplash.com/photo-1611605698335-8b1569810432?q=80&w=60&auto=format&fit=crop" alt="Reddit" class="w-10 h-10 rounded-lg mr-4" onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' fill=\'%23FF4500\' viewBox=\'0 0 24 24\'%3E%3Cpath d=\'M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249z\'/%3E%3C/svg%3E';" />
                                <div>
                                    <h3 class="font-heading font-semibold text-text-primary">Reddit API</h3>
                                    <p class="text-sm text-text-secondary">Discussioni e trend dalla comunità IT globale</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="flex items-center">
                                    <span class="w-3 h-3 bg-warning rounded-full mr-2"></span>
                                    <span class="text-sm text-warning font-medium">Limitato</span>
                                </div>
                                <button class="btn-accent text-sm" onclick="testConnection('reddit')">
                                    <i class="fas fa-play mr-1"></i>Test
                                </button>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">
                                    <i class="fas fa-user mr-2"></i>Client ID
                                </label>
                                <input type="text" id="reddit-client-id" value="p-jcoJKBdTpwzA" class="input-field w-full" placeholder="Client ID Reddit" />
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">
                                    <i class="fas fa-lock mr-2"></i>Client Secret
                                </label>
                                <div class="relative">
                                    <input type="password" id="reddit-client-secret" value="gko_LXELoV07..." class="input-field w-full pr-10" placeholder="Client Secret" />
                                    <button type="button" onclick="togglePasswordVisibility('reddit-client-secret')" class="absolute inset-y-0 right-0 pr-3 flex items-center">
                                        <i class="fas fa-eye text-text-secondary"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="mt-4">
                            <label class="block text-sm font-medium text-text-primary mb-2">
                                <i class="fas fa-robot mr-2"></i>User Agent
                            </label>
                            <input type="text" id="reddit-user-agent" value="ZeroCrash:v1.0.0 (by /u/zerocrash_dev)" class="input-field w-full" placeholder="User Agent per identificazione" />
                        </div>

                        <div class="mt-6">
                            <div class="bg-warning-50 border border-warning-200 rounded-lg p-4">
                                <div class="flex items-start">
                                    <i class="fas fa-exclamation-triangle text-warning mr-3 mt-1"></i>
                                    <div>
                                        <h4 class="font-medium text-warning-700">Limite Rate Raggiunto</h4>
                                        <p class="text-sm text-warning-600 mt-1">
                                            API Reddit sta riscontrando limitazioni. Utilizzo: 892/1,000 richieste orarie.
                                            <a href="#" class="underline">Configura throttling automatico</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-secondary-50 rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-text-secondary">Tempo Risposta</span>
                                    <span class="text-sm font-semibold text-warning">1,245ms</span>
                                </div>
                            </div>
                            <div class="bg-secondary-50 rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-text-secondary">Successo Rate</span>
                                    <span class="text-sm font-semibold text-warning">89.2%</span>
                                </div>
                            </div>
                            <div class="bg-secondary-50 rounded-lg p-4">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-text-secondary">Ultimo Test</span>
                                    <span class="text-sm font-semibold text-text-primary">15 min fa</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Rate Limiting Controls -->
            <section class="card">
                <div class="border-b border-border p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 class="text-xl font-heading font-semibold text-text-primary">Controlli Rate Limiting</h2>
                            <p class="text-text-secondary mt-1">Gestisci quote, throttling e monitoraggio utilizzo API</p>
                        </div>
                        <button class="btn-secondary" onclick="toggleSection('rate-limit-details')">
                            <i class="fas fa-chevron-down transition-transform" id="rate-limit-icon"></i>
                            <span class="ml-2">Impostazioni</span>
                        </button>
                    </div>
                </div>

                <div id="rate-limit-details" class="hidden p-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- Throttling Settings -->
                        <div>
                            <h3 class="font-heading font-semibold text-text-primary mb-4">Impostazioni Throttling</h3>
                            
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-2">
                                        Richieste per Minuto (Google News)
                                    </label>
                                    <div class="flex items-center space-x-4">
                                        <input type="range" min="1" max="100" value="60" class="flex-1" id="google-news-rpm" />
                                        <span class="text-sm font-semibold text-text-primary w-12" id="google-news-rpm-value">60</span>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-2">
                                        Richieste per Minuto (YouTube)
                                    </label>
                                    <div class="flex items-center space-x-4">
                                        <input type="range" min="1" max="100" value="45" class="flex-1" id="youtube-rpm" />
                                        <span class="text-sm font-semibold text-text-primary w-12" id="youtube-rpm-value">45</span>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-2">
                                        Richieste per Ora (Reddit)
                                    </label>
                                    <div class="flex items-center space-x-4">
                                        <input type="range" min="1" max="1000" value="600" class="flex-1" id="reddit-rph" />
                                        <span class="text-sm font-semibold text-text-primary w-12" id="reddit-rph-value">600</span>
                                    </div>
                                </div>

                                <div class="border-t border-border pt-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <label class="font-medium text-text-primary">Auto-Throttling</label>
                                            <p class="text-sm text-text-secondary">Riduzione automatica velocità al raggiungimento dell'80% quota</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer" />
                                            <div class="w-11 h-6 bg-secondary-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Usage Analytics -->
                        <div>
                            <h3 class="font-heading font-semibold text-text-primary mb-4">Analisi Utilizzo</h3>
                            
                            <div class="space-y-6">
                                <!-- Usage Chart Placeholder -->
                                <div class="bg-secondary-50 rounded-lg p-6 h-48 flex items-center justify-center">
                                    <div class="text-center">
                                        <i class="fas fa-chart-line text-4xl text-secondary mb-3"></i>
                                        <p class="text-text-secondary">Grafico Utilizzo API Ultime 24h</p>
                                        <p class="text-sm text-text-secondary mt-1">Dati aggregati ogni 15 minuti</p>
                                    </div>
                                </div>

                                <!-- Quota Alerts -->
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between p-3 bg-success-50 border border-success-200 rounded-lg">
                                        <div class="flex items-center">
                                            <i class="fas fa-newspaper text-success mr-3"></i>
                                            <span class="text-sm font-medium text-success-700">Google News</span>
                                        </div>
                                        <span class="text-sm text-success-700">Sotto soglia</span>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 bg-success-50 border border-success-200 rounded-lg">
                                        <div class="flex items-center">
                                            <i class="fab fa-youtube text-success mr-3"></i>
                                            <span class="text-sm font-medium text-success-700">YouTube Data</span>
                                        </div>
                                        <span class="text-sm text-success-700">Sotto soglia</span>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 bg-warning-50 border border-warning-200 rounded-lg">
                                        <div class="flex items-center">
                                            <i class="fab fa-reddit text-warning mr-3"></i>
                                            <span class="text-sm font-medium text-warning-700">Reddit API</span>
                                        </div>
                                        <span class="text-sm text-warning-700">89% quota</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Automated Failover Configuration -->
                    <div class="mt-8 border-t border-border pt-6">
                        <h3 class="font-heading font-semibold text-text-primary mb-4">Configurazione Failover Automatico</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <label class="font-medium text-text-primary">Fallback su Rate Limit</label>
                                        <p class="text-sm text-text-secondary">Passa a sorgenti alternative automaticamente</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" checked class="sr-only peer" />
                                        <div class="w-11 h-6 bg-secondary-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                    </label>
                                </div>

                                <div class="flex items-center justify-between">
                                    <div>
                                        <label class="font-medium text-text-primary">Notifiche Webhook</label>
                                        <p class="text-sm text-text-secondary">Avvisi per eventi critici via webhook</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" />
                                        <div class="w-11 h-6 bg-secondary-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                    </label>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">URL Webhook (Opzionale)</label>
                                <input type="url" class="input-field w-full" placeholder="https://webhook.site/your-endpoint" />
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Cache Configuration -->
            <section class="card">
                <div class="border-b border-border p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 class="text-xl font-heading font-semibold text-text-primary">Configurazione Cache</h2>
                            <p class="text-text-secondary mt-1">Gestisci TTL, performance metrics e strategie di invalidazione</p>
                        </div>
                        <button class="btn-secondary" onclick="toggleSection('cache-details')">
                            <i class="fas fa-chevron-down transition-transform" id="cache-icon"></i>
                            <span class="ml-2">Dettagli</span>
                        </button>
                    </div>
                </div>

                <div id="cache-details" class="hidden p-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                        <!-- TTL Settings -->
                        <div>
                            <h3 class="font-heading font-semibold text-text-primary mb-4">Impostazioni TTL</h3>
                            
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-2">
                                        Cache Ricerche Google News (minuti)
                                    </label>
                                    <div class="flex items-center space-x-4">
                                        <input type="range" min="5" max="120" value="30" class="flex-1" id="google-news-ttl" />
                                        <span class="text-sm font-semibold text-text-primary w-12" id="google-news-ttl-value">30</span>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-2">
                                        Cache Video YouTube (minuti)
                                    </label>
                                    <div class="flex items-center space-x-4">
                                        <input type="range" min="5" max="120" value="45" class="flex-1" id="youtube-ttl" />
                                        <span class="text-sm font-semibold text-text-primary w-12" id="youtube-ttl-value">45</span>
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-2">
                                        Cache Post Reddit (minuti)
                                    </label>
                                    <div class="flex items-center space-x-4">
                                        <input type="range" min="5" max="120" value="15" class="flex-1" id="reddit-ttl" />
                                        <span class="text-sm font-semibold text-text-primary w-12" id="reddit-ttl-value">15</span>
                                    </div>
                                </div>

                                <div class="border-t border-border pt-4">
                                    <div class="flex items-center justify-between">
                                        <div>
                                            <label class="font-medium text-text-primary">Cache Intelligente</label>
                                            <p class="text-sm text-text-secondary">Adatta TTL basato sulla popolarità contenuto</p>
                                        </div>
                                        <label class="relative inline-flex items-center cursor-pointer">
                                            <input type="checkbox" checked class="sr-only peer" />
                                            <div class="w-11 h-6 bg-secondary-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Performance Metrics -->
                        <div>
                            <h3 class="font-heading font-semibold text-text-primary mb-4">Metriche Performance</h3>
                            
                            <div class="space-y-6">
                                <!-- Cache Statistics -->
                                <div class="bg-secondary-50 rounded-lg p-6">
                                    <div class="grid grid-cols-2 gap-4">
                                        <div class="text-center">
                                            <div class="text-2xl font-bold text-primary">87.3%</div>
                                            <div class="text-xs text-text-secondary">Hit Rate</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-2xl font-bold text-accent">156ms</div>
                                            <div class="text-xs text-text-secondary">Avg Response</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-2xl font-bold text-success">2.1MB</div>
                                            <div class="text-xs text-text-secondary">Cache Size</div>
                                        </div>
                                        <div class="text-center">
                                            <div class="text-2xl font-bold text-secondary">4,892</div>
                                            <div class="text-xs text-text-secondary">Cached Items</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Cache Actions -->
                                <div class="space-y-3">
                                    <button class="w-full btn-secondary text-sm flex items-center justify-center" onclick="clearCache('all')">
                                        <i class="fas fa-broom mr-2"></i>Pulisci Tutta la Cache
                                    </button>
                                    
                                    <div class="grid grid-cols-3 gap-2">
                                        <button class="btn-secondary text-xs p-2" onclick="clearCache('google-news')">
                                            <i class="fas fa-newspaper mr-1"></i>News
                                        </button>
                                        <button class="btn-secondary text-xs p-2" onclick="clearCache('youtube')">
                                            <i class="fab fa-youtube mr-1"></i>YouTube
                                        </button>
                                        <button class="btn-secondary text-xs p-2" onclick="clearCache('reddit')">
                                            <i class="fab fa-reddit mr-1"></i>Reddit
                                        </button>
                                    </div>
                                </div>

                                <!-- Invalidation Strategy -->
                                <div class="border border-border rounded-lg p-4">
                                    <label class="block text-sm font-medium text-text-primary mb-2">Strategia Invalidazione</label>
                                    <select class="input-field w-full text-sm">
                                        <option value="lru" selected>Least Recently Used (LRU)</option>
                                        <option value="lfu">Least Frequently Used (LFU)</option>
                                        <option value="fifo">First In First Out (FIFO)</option>
                                        <option value="ttl-only">Solo TTL</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Cache Warming Configuration -->
                    <div class="mt-8 border-t border-border pt-6">
                        <h3 class="font-heading font-semibold text-text-primary mb-4">Pre-Caricamento Cache</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <label class="font-medium text-text-primary">Pre-caricamento Automatico</label>
                                        <p class="text-sm text-text-secondary">Popola cache con contenuti trending all'avvio</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" checked class="sr-only peer" />
                                        <div class="w-11 h-6 bg-secondary-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                    </label>
                                </div>

                                <div class="flex items-center justify-between">
                                    <div>
                                        <label class="font-medium text-text-primary">Refresh Proattivo</label>
                                        <p class="text-sm text-text-secondary">Aggiorna cache prima della scadenza TTL</p>
                                    </div>
                                    <label class="relative inline-flex items-center cursor-pointer">
                                        <input type="checkbox" class="sr-only peer" />
                                        <div class="w-11 h-6 bg-secondary-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"></div>
                                    </label>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-text-primary mb-2">Orario Pre-caricamento</label>
                                <select class="input-field w-full">
                                    <option value="6:00" selected>06:00 (Prima del picco mattutino)</option>
                                    <option value="12:00">12:00 (Pausa pranzo)</option>
                                    <option value="18:00">18:00 (Sera)</option>
                                    <option value="22:00">22:00 (Tardo serale)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Action Buttons -->
        <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mt-8 p-6 bg-secondary-50 rounded-lg">
            <div class="flex items-center space-x-4">
                <button class="btn-secondary" onclick="resetToDefaults()">
                    <i class="fas fa-undo mr-2"></i>Ripristina Default
                </button>
                <button class="btn-secondary" onclick="exportConfiguration()">
                    <i class="fas fa-download mr-2"></i>Esporta Config
                </button>
                <button class="btn-secondary" onclick="importConfiguration()">
                    <i class="fas fa-upload mr-2"></i>Importa Config
                </button>
            </div>
            <button class="btn-primary text-lg px-8 py-3" onclick="saveAllConfigurations()">
                <i class="fas fa-save mr-2"></i>Salva Tutte le Configurazioni
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-surface border-t border-border mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center text-text-secondary">
                <p>&copy; 2025 ZeroCrash. Tutti i diritti riservati.</p>
                <p class="text-sm mt-2">Configurazione API - Gestione centralizzata integrazioni servizi esterni</p>
            </div>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-surface rounded-lg p-8 text-center max-w-md mx-4">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"></div>
            <h3 class="text-lg font-semibold text-text-primary mb-2">Testando Connessioni...</h3>
            <p class="text-text-secondary">Verifico stato delle API configurate</p>
        </div>
    </div>

    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenu.classList.toggle('hidden');
        }

        // Section toggle functionality
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            const icon = document.getElementById(sectionId.replace('-details', '-icon'));
            
            section.classList.toggle('hidden');
            icon.classList.toggle('rotate-180');
        }

        // Password visibility toggle
        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            const button = input.nextElementSibling.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                button.classList.remove('fa-eye');
                button.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                button.classList.remove('fa-eye-slash');
                button.classList.add('fa-eye');
            }
        }

        // Connection testing
        async function testConnection(service) {
            const loadingOverlay = document.getElementById('loading-overlay');
            loadingOverlay.classList.remove('hidden');

            // Simulate API testing
            await new Promise(resolve => setTimeout(resolve, 2000));

            loadingOverlay.classList.add('hidden');

            // Show result notification
            showNotification(`Test ${service} completato con successo!`, 'success');
        }

        // Test all connections
        async function testAllConnections() {
            const testButton = document.getElementById('test-all-connections');
            const originalText = testButton.innerHTML;
            
            testButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Testing...';
            testButton.disabled = true;

            const loadingOverlay = document.getElementById('loading-overlay');
            loadingOverlay.classList.remove('hidden');

            // Simulate comprehensive testing
            await new Promise(resolve => setTimeout(resolve, 3000));

            loadingOverlay.classList.add('hidden');
            testButton.innerHTML = originalText;
            testButton.disabled = false;

            showNotification('Test completo di tutte le API completato!', 'success');
        }

        // Range input handlers
        function setupRangeInputs() {
            const ranges = [
                'google-news-rpm',
                'youtube-rpm', 
                'reddit-rph',
                'google-news-ttl',
                'youtube-ttl',
                'reddit-ttl'
            ];

            ranges.forEach(id => {
                const range = document.getElementById(id);
                const valueSpan = document.getElementById(id + '-value');
                
                if (range && valueSpan) {
                    range.addEventListener('input', function() {
                        valueSpan.textContent = this.value;
                    });
                }
            });
        }

        // Cache operations
        function clearCache(type) {
            const confirmMessage = type === 'all' 
                ? 'Sei sicuro di voler pulire tutta la cache?' 
                : `Sei sicuro di voler pulire la cache ${type}?`;
                
            if (confirm(confirmMessage)) {
                showNotification(`Cache ${type} pulita con successo!`, 'success');
                
                // Update cache metrics (simulation)
                if (type === 'all') {
                    updateCacheMetrics(0, 0, 0);
                }
            }
        }

        // Update cache metrics display
        function updateCacheMetrics(hitRate, size, items) {
            // Implementation would update the displayed metrics
            console.log('Updating cache metrics:', { hitRate, size, items });
        }

        // Configuration management
        function saveAllConfigurations() {
            const saveButton = event.target;
            const originalText = saveButton.innerHTML;
            
            saveButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Salvando...';
            saveButton.disabled = true;

            // Simulate save operation
            setTimeout(() => {
                saveButton.innerHTML = '<i class="fas fa-check mr-2"></i>Salvato!';
                saveButton.classList.remove('btn-primary');
                saveButton.classList.add('bg-success', 'text-white');

                showNotification('Tutte le configurazioni sono state salvate con successo!', 'success');

                // Reset button after 3 seconds
                setTimeout(() => {
                    saveButton.innerHTML = originalText;
                    saveButton.classList.remove('bg-success', 'text-white');
                    saveButton.classList.add('btn-primary');
                    saveButton.disabled = false;
                }, 3000);
            }, 1500);
        }

        function resetToDefaults() {
            if (confirm('Sei sicuro di voler ripristinare tutte le impostazioni ai valori predefiniti?')) {
                showNotification('Configurazioni ripristinate ai valori predefiniti', 'warning');
                // Reset logic would go here
            }
        }

        function exportConfiguration() {
            const config = {
                apis: {
                    googleNews: { rpm: 60, ttl: 30 },
                    youtube: { rpm: 45, ttl: 45 },
                    reddit: { rph: 600, ttl: 15 }
                },
                cache: {
                    strategy: 'lru',
                    intelligentCache: true
                },
                failover: {
                    enabled: true,
                    webhooks: false
                }
            };

            const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'zerocrash-api-config.json';
            a.click();
            URL.revokeObjectURL(url);

            showNotification('Configurazione esportata con successo!', 'success');
        }

        function importConfiguration() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const config = JSON.parse(e.target.result);
                            console.log('Imported configuration:', config);
                            showNotification('Configurazione importata con successo!', 'success');
                            // Apply imported configuration
                        } catch (error) {
                            showNotification('Errore nel formato del file di configurazione', 'error');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            
            input.click();
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 transition-all duration-300 transform translate-x-full`;
            
            const bgColor = {
                'success': 'bg-success text-white',
                'error': 'bg-error text-white', 
                'warning': 'bg-warning text-white',
                'info': 'bg-primary text-white'
            }[type];

            notification.className += ` ${bgColor}`;
            notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'exclamation-triangle' : type === 'warning' ? 'exclamation' : 'info-circle'} mr-2"></i>
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-white hover:text-gray-200">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;

            document.body.appendChild(notification);

            // Slide in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);

            // Auto remove after 5 seconds
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 5000);
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            setupRangeInputs();
            
            // Add test all connections event listener
            document.getElementById('test-all-connections').addEventListener('click', testAllConnections);

            console.log('API Configuration Management page initialized');
        });

        // Real-time status updates (simulation)
        setInterval(() => {
            // Simulate real-time API usage updates
            const usageElements = document.querySelectorAll('[id$="-value"]');
            // Updates would be implemented here for production
        }, 30000); // Update every 30 seconds
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>